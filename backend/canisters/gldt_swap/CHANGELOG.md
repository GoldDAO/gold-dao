# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/).

## Versions

### [unreleased]

### [1.1.5] - 2025-03-11

#### Add

- Include set_buy_back_canister_validate in order to be able to call via SNS proposals

#### Change

- Unhide set_buy_back_canister on candid

### [1.1.4] - 2025-03-11

#### Add

- Include buyback burn account in /metrics endpoint

### [1.1.3] - 2025-02-25

#### Feature

- **Transfer GLDT Fees for GOLDAO Buy back and burn**: Ledger fees and Swap fees for GLDT will accure to 100 GLDT and then be transferred to the buyback and burn canister upon which it will be converted to GOLDAO and burned.

### [1.1.2] - 2025-02-21

#### Updates

- **Use new GLDT Ledger fee**: The GLDT fee was recently increased. Internally we reference a global variable for the tx fee and so we have updated it here in the swap canister as well as fixing any tests that may have broken.

### [1.1.1] - 2024-12-02

#### Updates

- **ICRC10 && ICRC28 Delegation support**: Add support for these new standards to enable NFID wallets to work correctly.

### [1.1.0] - 2024-11-18

#### Description

This version incorporates a few minor changes and new features.

#### New changes

- **GLDT Supply balancer**: the GLDT ledger is configured to not burn fees and instead all transaction fees should end up in the ledger fee account. However, Dfinity has not fully finished this feature and as such the fee generated by an approved call is burned. Because we want to maintain a ratio of 1g : 100 GLDT we have added a feature to periodically check the total gram quantity of GLD NFTs that are locked by the swap canister and mint any outstanding GLDT that got burned via the approve calls to the ledger fee account which is controlled by the DAO.

#### Improvements

- **OGY fee account balancer**: Transferring NFTs costs OGY during the forward or reverse swap and is paid for by the swap canister on behalf of the user. Each GLD NFT canister ( 1g, 10g, 100g, 1kg) has a dedicated fee account that the swap canister distributes OGY to periodically. Previously, we had a high threshold for triggering logs and stopping the swap process even though there was still OGY to facilitate swaps. The swap process is now no longer stopped and instead we log and alert when the developers need to top up the canister with more OGY.

- **Metrics endpoint**: Some of the metrics endpoint was not fully JSON compliant. This change makes the endpoint fully compliant such that other services can use it correctly without needing to parse to JSON.

### [1.0.0] - 2024-10-28

#### Description

This marks the beginning of the GLDT swap canister initial deployment. This canister allows for the swapping of GLD NFT and GLDT.
